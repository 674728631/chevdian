function tabbox(t){var e={container:null,height:300,dis:50,duration:300,wheel:60,pull_dis:100,pull:!1,wheel_self:!0,exception_class:"",event_pullMove:null,event_pullEnd:null,event_scroll:null,event_scrollEnd:null,event_scrollBottom:null,event_switch:null},c=$.extend({},e,t);if(!c.container)return null;var n=$(c.container);if(0===n.length)return null;("number"!==$.type(c.dis)||c.dis<0)&&(c.dis=e.dis),"number"!==$.type(c.duration)?c.dis=e.dis:c.duration<0&&(c.duration=0),$.isFunction(c.event_pullMove)||(c.event_pullMove=null),$.isFunction(c.event_pullEnd)||(c.event_pullEnd=null),$.isFunction(c.event_scroll)||(c.event_scroll=null),$.isFunction(c.event_scrollEnd)||(c.event_scrollEnd=null),$.isFunction(c.event_scrollBottom)||(c.event_scrollBottom=null),$.isFunction(c.event_switch)||(c.event_switch=null);var u=n.eq(0),a=u.find(".tabbox-layer:eq(0)"),v=a.find(".tabbox-tab"),w=-1,l=!1,f=0,s=0,r=0,o=0,_=0,p=0,d=[],m=0,g=[],b=1,Y=1,x=0,X=0,D=0,Z=0,q=0,k=!0,B=[],M=!1;if(v.each(function(){d.push(0),g.push(0)}),"boolean"===$.type(c.pull))v.each(function(){B.push(c.pull)});else if($.isArray(c.pull))for(var i=0,h=v.length;i<h;i++)"boolean"===$.type(c.pull[i])?B.push(c.pull[i]):B.push(!1);else v.each(function(){B.push(!1)});u.css({height:c.height}).on("touchstart",function(t){s=t.touches?t.touches[0].pageX:t.pageX,r=t.touches?t.touches[0].pageY:t.pageY,q=_=r,Z=Date.now(),D=Date.now(),M=!(k=!0)}).on("touchmove",function(t){if(!l)if(t.preventDefault(),o=t.touches?t.touches[0].pageX:t.pageX,_=t.touches?t.touches[0].pageY:t.pageY,(c.exception_class&&0<$(t.target).closest(c.exception_class).length||1<v.length)&&0===x&&Math.abs(_-r)<10&&10<=Math.abs(o-s)?x=-1:(!c.exception_class&&1===v.length&&0<Math.abs(_-r)||0===x&&10<=Math.abs(_-r))&&(x=1),-1===x)b=0<o-s?1:-1,0<(m=p+(o-s))?m=0:m<-u.width()*(v.length-1)&&(m=-u.width()*(v.length-1)),a.css({"webkit-transform":"translateX("+m+"px) translateY(0) translateZ(0)",transform:"translateX("+m+"px) translateY(0) translateZ(0)"});else{Y=0<_-r?1:w,g[f]=d[f]+(_-r),0<g[f]?B[f]?(g[f]=Math.round(.3*g[f]),g[f]>c.pull_dis&&(g[f]=c.pull_dis),c.event_pullMove&&c.event_pullMove(g[f],f),M=!0):g[f]=0:g[f]<0&&(v.eq(f).height()<=u.height()?(g[f]=0,Y===w&&c.event_scrollBottom&&100<Date.now()-D&&(D=Date.now(),c.event_scrollBottom(f,0))):u.height()-v.eq(f).height()>g[f]&&(g[f]=u.height()-v.eq(f).height(),Y===w&&c.event_scrollBottom&&100<Date.now()-D&&(D=Date.now(),c.event_scrollBottom(f,-g[f])))),c.event_scroll&&100<Date.now()-X&&(X=Date.now(),c.event_scroll(f,-g[f],Y)),v.eq(f).css({"webkit-transform":"translateX(0) translateY("+g[f]+"px) translateZ(0)",transform:"translateX(0) translateY("+g[f]+"px) translateZ(0)"});var e=Date.now();k=!0,300<e-Z&&(Z=e,q=_)}}).on("touchend",function(){var s,r,o,i,h;if(!l)if(-1===x){var t=f;-1===b?(f=Math.floor(-m/u.width()),-m%u.width()>=c.dis&&f<v.length-1&&(f+=1)):(f=v.length-1-Math.floor((u.width()*(v.length-1)+m)/u.width()),(u.width()*(v.length-1)+m)%u.width()>=c.dis&&0<f&&(f-=1)),m=-u.width()*f,l=!0,a.css({transition:"webkit-transform "+c.duration/1e3+"s",transition:"transform "+c.duration/1e3+"s","webkit-transform":"translateX("+m+"px) translateY(0) translateZ(0)",transform:"translateX("+m+"px) translateY(0) translateZ(0)"}),setTimeout(function(){a.css({transition:"none","webkit-transform":"translateX("+100*-f+"%) translateY(0) translateZ(0)",transform:"translateX("+100*-f+"%) translateY(0) translateZ(0)"}),l=!1,p=m,x=0,t!==f&&c.event_switch&&c.event_switch(f,t)},c.duration)}else{var e=Date.now();k=!1,s=(_-q)/(e-Z),r=e,o=g[f],h=5e-4*(i=0<s?-1:1),function t(){if(!k){var e=Date.now(),n=e-r,a=s+n*h,l=(s+a)/2*n;if(g[f]=o+l,0<=i*a||0<g[f]||u.height()-v.eq(f).height()>g[f])return 0<g[f]?(B[f]&&M&&c.event_pullEnd&&c.event_pullEnd(g[f],f),g[f]=0):v.eq(f).height()<=u.height()?g[f]=0:u.height()-v.eq(f).height()>g[f]&&(g[f]=u.height()-v.eq(f).height(),Y===w&&c.event_scrollBottom&&100<Date.now()-D&&(D=Date.now(),c.event_scrollBottom(f,-g[f]))),c.event_scroll&&100<Date.now()-X&&(X=Date.now(),c.event_scroll(f,-g[f],Y)),c.event_scrollEnd&&setTimeout(function(){c.event_scrollEnd(f,-g[f],Y)},50),v.eq(f).css({"webkit-transform":"translateX(0) translateY("+g[f]+"px) translateZ(0)",transform:"translateX(0) translateY("+g[f]+"px) translateZ(0)"}),d[f]=g[f],void(k=!(x=0));c.event_scroll&&100<Date.now()-X&&(X=Date.now(),c.event_scroll(f,-g[f],Y)),v.eq(f).css({"webkit-transform":"translateX(0) translateY("+g[f]+"px) translateZ(0)",transform:"translateX(0) translateY("+g[f]+"px) translateZ(0)"}),d[f]=g[f],setTimeout(t,10)}}()}});var E=function(t){-120===t.wheelDeltaY?(Y=w,g[f]=d[f]-c.wheel):120===t.wheelDeltaY&&(Y=1,g[f]=d[f]+c.wheel),0<g[f]?g[f]=0:g[f]<0&&(v.eq(f).height()<=u.height()?(g[f]=0,Y===w&&c.event_scrollBottom&&100<Date.now()-D&&(D=Date.now(),c.event_scrollBottom(f,0))):u.height()-v.eq(f).height()>g[f]&&(g[f]=u.height()-v.eq(f).height(),Y===w&&c.event_scrollBottom&&100<Date.now()-D&&(D=Date.now(),c.event_scrollBottom(f,-g[f])))),c.event_scroll&&c.event_scroll(f,-g[f],Y),c.event_scrollEnd&&c.event_scrollEnd(f,-g[f],Y),v.eq(f).css({"webkit-transform":"translateX(0) translateY("+g[f]+"px) translateZ(0)",transform:"translateX(0) translateY("+g[f]+"px) translateZ(0)"}),d[f]=g[f]};return c.wheel_self?u.on("mousewheel",E):$(window).on("mousewheel",E),{activeTab:function(){return v.eq(f)},switchTo:function(t,e){if(t<v.length){var n=$.extend({animation:!0,event:!1},e);f!==t?n.animation?(l=!0,a.css({transition:"webkit-transform "+c.duration/1e3+"s",transition:"transform "+c.duration/1e3+"s","webkit-transform":"translateX("+100*-t+"%) translateY(0) translateZ(0)",transform:"translateX("+100*-t+"%) translateY(0) translateZ(0)"}),setTimeout(function(){a.css({transition:"none"}),l=!1,p=-u.width()*t,c.event_switch&&c.event_switch(t,f),f=t},c.duration)):(a.css({"webkit-transform":"translateX("+100*-t+"%) translateY(0) translateZ(0)",transform:"translateX("+100*-t+"%) translateY(0) translateZ(0)"}),p=-u.width()*t,c.event_switch&&c.event_switch(t,f),f=t):n.event&&c.event_switch&&c.event_switch(t,f)}},scrollTo:function(t,e,n){if(t<v.length){var a=$.extend({animation:!1},n);k=!0,a.animation?(r=300,o=(s=-e)>g[l=t]?1:-1,i=Math.ceil((s-g[l])/r*20),(h=function(){var t=g[l]+i;(1===o&&s<t||-1===o&&t<s)&&(t=s),g[l]=t,d[l]=t,v.eq(l).css({"webkit-transform":"translateX(0) translateY("+g[l]+"px) translateZ(0)",transform:"translateX(0) translateY("+g[l]+"px) translateZ(0)"}),t!==s&&setTimeout(h,20)})()):(g[t]=-e,d[t]=-e,v.eq(t).css({"webkit-transform":"translateX(0) translateY("+g[t]+"px) translateZ(0)",transform:"translateX(0) translateY("+g[t]+"px) translateZ(0)"}))}var l,s,r,o,i,h}}}